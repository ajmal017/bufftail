#include <stir_spread.afl>
#include <volatility_filter.afl>
#include <z_score.afl>

stoch = StochK(10, 3);
uptrend = ROC(stoch,1) > 0 && ROC(C,1) > 0;
zv = zscore( StDev( ROC(C,1), lookback), lookback);
volatility_filter = zv > -1 && zv < 1.65;

Buy = volatility_filter &&  volume_filter && uptrend && volatility_filter;
Short = Cover = Sell = True;