#include_once "Formulas\Custom\runs_test.afl";

PositionSize = MarginDeposit;

lookback = 10; //Optimize("lb", 1, 1, 10, 1) ;
Z = ComputeRunZ( ROC(C,lookback), lookback );
z_threshold = 1.65; //Optimize("z threshold", 1.65, 1.65, 2.0, 0.05) ;

ub = Optimize("up", -10,0,0,1);
lb = Optimize("lb", -10,0,10,1);

Buy = volatility_filter &&  ROC(C,10) > lb;// && ROC(C,10) > lb;
Short = Cover = Sell = False;

ApplyStop( stopTypeNBar, stopModeBars, 1, 1 );